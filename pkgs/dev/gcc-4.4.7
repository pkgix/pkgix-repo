
version=4.4.7
description="The GCC compiler"
depends=()
website="http://gcc.gnu.org/"
license=('GPL' 'LGPL' 'FDL' 'custom')

isinstalled() {
	gcc --version | grep -q " $version " &> /dev/null
}

iscompat() {
	return 0
}

build() {
	fetch_extract "http://www.mirrorservice.org/sites/sourceware.org/pub/gcc/releases/gcc-${version}/gcc-${version}.tar.bz2" \
		"5ff75116b8f763fa0fb5621af80fc6fb3ea0f1b1a57520874982f03f26cd607f"

	cd "gcc-${version}"

	LDFLAGS="-Wl,-rpath=$LD_RUN_PATH" ./configure \
		--prefix="${prefix}" \
		--mandir="${prefix}/share/man" \
		--infodir="${prefix}/share/info" \
		--libdir="${prefix}/lib" \
		--libexecdir="${prefix}/lib" \
		--enable-shared \
		--enable-languages=c,c++,fortran,objc,obj-c++ \
		--enable-__cxa_atexit \
		--disable-libstdcxx-pch \
		--disable-multilib \
		--disable-libgomp \
		--disable-libmudflap \
		--disable-libssp \
		--enable-clocale=gnu \
		--with-tune=generic \
		--with-cloog \
		--with-ppl \
		--with-system-zlib

	make
}

installenv() {
	cd "gcc-${version}"
	make DESTDIR="${destdir}" install
}

# vim: set ft=sh :
